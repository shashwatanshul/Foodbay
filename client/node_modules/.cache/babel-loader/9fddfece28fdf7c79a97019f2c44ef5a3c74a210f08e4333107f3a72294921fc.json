{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const OrdersList=()=>{const[orders,setOrders]=useState([]);useEffect(()=>{const fetchOrders=async()=>{try{const response=await axios.get(\"/paybutton/getallorders\");setOrders(response.data);}catch(error){console.error(\"Error fetching orders:\",error);}};fetchOrders();},[]);const toggleDelivered=async orderId=>{try{await axios.post(\"/paybutton/toggle-delivered/\".concat(orderId));// Refresh orders after toggling delivered status\nconst response=await axios.get(\"/paybutton/getallorders\");setOrders(response.data);}catch(error){console.error(\"Error toggling delivered status:\",error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Orders List\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",style:{borderColor:\"#343a40\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",style:{minWidth:\"150px\"},children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"UserId\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",style:{minWidth:\"150px\"},children:\"Order Items\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Order Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Deliver Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Transaction ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Table Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",style:{minWidth:\"150px\"},children:\"Date & Time of Order Placement\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-dark text-light\",style:{minWidth:\"150px\"},children:\"Date & Time of Delivery\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"150px\"},children:order._id}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"150px\"},children:order.name}),/*#__PURE__*/_jsx(\"td\",{children:order.email}),/*#__PURE__*/_jsx(\"td\",{children:order.userid}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"150px\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",style:{borderColor:\"#343a40\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"bg-secondary text-light\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-secondary text-light\",children:\"Variant\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-secondary text-light\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-secondary text-light\",children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.orderItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"100px\"},children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.varient}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{style:{minWidth:\"100px\"},children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-inr\"}),\" \",item.price]})]},item._id))})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-inr\"}),\" \",order.orderAmount]}),/*#__PURE__*/_jsxs(\"td\",{style:{minWidth:\"100px\"},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:order.isDelivered,onChange:()=>toggleDelivered(order._id)}),/*#__PURE__*/_jsx(\"span\",{className:\"slider\"})]}),\" \",order.isDelivered?\"Delivered\":\"Not Delivered\"]}),/*#__PURE__*/_jsx(\"td\",{children:order.transactionId}),/*#__PURE__*/_jsx(\"td\",{children:order.tableNumber}),/*#__PURE__*/_jsx(\"td\",{children:order.mobileNumber}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"200px\"},children:new Date(order.createdAt).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{style:{minWidth:\"200px\"},children:order.isDelivered?new Date(order.updatedAt).toLocaleString():\"Not Delivered\"})]},order._id))})]})})]});};export default OrdersList;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrdersList","orders","setOrders","fetchOrders","response","get","data","error","console","toggleDelivered","orderId","post","concat","children","className","style","borderColor","minWidth","map","order","_id","name","email","userid","orderItems","item","varient","quantity","class","price","orderAmount","type","checked","isDelivered","onChange","transactionId","tableNumber","mobileNumber","Date","createdAt","toLocaleString","updatedAt"],"sources":["C:/Users/adity/OneDrive/Desktop/GitHub Repositories/Foodbay/client/src/screens/OrdersList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst OrdersList = () => {\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const response = await axios.get(\"/paybutton/getallorders\");\r\n        setOrders(response.data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching orders:\", error);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const toggleDelivered = async (orderId) => {\r\n    try {\r\n      await axios.post(`/paybutton/toggle-delivered/${orderId}`);\r\n      // Refresh orders after toggling delivered status\r\n      const response = await axios.get(\"/paybutton/getallorders\");\r\n      setOrders(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error toggling delivered status:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <hr></hr>\r\n      <h1>Orders List</h1>\r\n      <hr></hr>\r\n      <div className=\"table-responsive\">\r\n        <table\r\n          className=\"table table-bordered\"\r\n          style={{ borderColor: \"#343a40\" }}\r\n        >\r\n          <thead>\r\n            <tr>\r\n              <th className=\"bg-dark text-light\" style={{ minWidth: \"150px\" }}>\r\n                Order ID\r\n              </th>\r\n              <th className=\"bg-dark text-light\">Name</th>\r\n              <th className=\"bg-dark text-light\">Email</th>\r\n              <th className=\"bg-dark text-light\">UserId</th>\r\n              <th className=\"bg-dark text-light\" style={{ minWidth: \"150px\" }}>\r\n                Order Items\r\n              </th>\r\n              <th className=\"bg-dark text-light\">Order Amount</th>\r\n              <th className=\"bg-dark text-light\">Deliver Status</th>\r\n              <th className=\"bg-dark text-light\">Transaction ID</th>\r\n              <th className=\"bg-dark text-light\">Table Number</th>\r\n              <th className=\"bg-dark text-light\">Mobile Number</th>\r\n              <th className=\"bg-dark text-light\" style={{ minWidth: \"150px\" }}>\r\n                Date & Time of Order Placement\r\n              </th>\r\n              <th className=\"bg-dark text-light\" style={{ minWidth: \"150px\" }}>\r\n                Date & Time of Delivery\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map((order) => (\r\n              <tr key={order._id}>\r\n                <td style={{ minWidth: \"150px\" }}>{order._id}</td>\r\n                <td style={{ minWidth: \"150px\" }}>{order.name}</td>\r\n                <td>{order.email}</td>\r\n                <td>{order.userid}</td>\r\n                <td style={{ minWidth: \"150px\" }}>\r\n                  <table\r\n                    className=\"table table-bordered\"\r\n                    style={{ borderColor: \"#343a40\" }}\r\n                  >\r\n                    <thead>\r\n                      <tr>\r\n                        <th className=\"bg-secondary text-light\">Name</th>\r\n                        <th className=\"bg-secondary text-light\">Variant</th>\r\n                        <th className=\"bg-secondary text-light\">Quantity</th>\r\n                        <th className=\"bg-secondary text-light\">Price</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {order.orderItems.map((item) => (\r\n                        <tr key={item._id}>\r\n                          <td style={{ minWidth: \"100px\" }}>{item.name}</td>\r\n                          <td>{item.varient}</td>\r\n                          <td>{item.quantity}</td>\r\n                          <td style={{ minWidth: \"100px\" }}>\r\n                            <i class=\"fa fa-inr\"></i> {item.price}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </td>\r\n                <td>\r\n                  <i class=\"fa fa-inr\"></i> {order.orderAmount}\r\n                </td>\r\n                <td style={{ minWidth: \"100px\" }}>\r\n                  <label className=\"switch\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={order.isDelivered}\r\n                      onChange={() => toggleDelivered(order._id)}\r\n                    />\r\n\r\n                    <span className=\"slider\"></span>\r\n                  </label>{\" \"}\r\n                  {order.isDelivered ? \"Delivered\" : \"Not Delivered\"}\r\n                </td>\r\n                <td>{order.transactionId}</td>\r\n                <td>{order.tableNumber}</td>\r\n                <td>{order.mobileNumber}</td>\r\n                <td style={{ minWidth: \"200px\" }}>\r\n                  {new Date(order.createdAt).toLocaleString()}\r\n                </td>\r\n                <td style={{ minWidth: \"200px\" }}>\r\n                  {order.isDelivered\r\n                    ? new Date(order.updatedAt).toLocaleString()\r\n                    : \"Not Delivered\"}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrdersList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}